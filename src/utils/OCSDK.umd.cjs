(function(i,a){typeof exports=="object"&&typeof module<"u"?a(exports):typeof define=="function"&&define.amd?define(["exports"],a):(i=typeof globalThis<"u"?globalThis:i||self,a(i.OCSDK={}))})(this,function(i){"use strict";var a=(s=>(s.ChangeStation="ChangeStation",s))(a||{});class r{targetWindow=null;loadingHook={viewLoaded:!1,callback:null};destory(){this.targetWindow=null,this.loadingHook=null}constructor(e,t){let n=null;if(typeof e=="string"?n=document.getElementById(e):e instanceof HTMLElement&&(n=e),!n)return;const o=document.createElement("iframe");o.src=`${t.url}/player`,o.style.width="100%",o.style.height="100%",o.style.border="none",n.append(o),this.targetWindow=o.contentWindow,o.contentWindow.addEventListener("load",l=>{this.loadingHook.viewLoaded=!0,this.loadingHook.callback?.()})}onLoad=e=>{this.loadingHook.callback=e,this.loadingHook.viewLoaded&&e?.()};invoke=(e,t,n)=>{const o=m=>{try{const d=m.data;if(d.type!=="OCSDKPlatform")return;d.data.method===e&&d.period==="invokeComplete"&&(n?.(),setTimeout(()=>{this.targetWindow.removeEventListener("message",o)},0))}catch{}};this.targetWindow.addEventListener("message",o);const l={type:"OCSDKClient",version:"1.0",period:"invoke",data:{method:e,params:t}};this.targetWindow.postMessage(l)}}class c{onImplementation=null;destory=()=>{window.removeEventListener("message",this.onReceiveMessage)};constructor(){window.addEventListener("message",this.onReceiveMessage)}onReceiveMessage=e=>{try{const t=e.data;if(t.type!=="OCSDKClient")return;t.data&&this.onImplementation?.(t.data.method,t.data.params,n=>{this.onImplementationCallback(t.data.method,n)})}catch{}};onImplementationCallback=(e,t)=>{const n={type:"OCSDKPlatform",version:"1.0",period:"invokeComplete",data:{method:e,resault:t}};window.postMessage(n)}}i.OCClientSDK=r,i.OCPlatformSDK=c,i.OCSDKMethodType=a,Object.defineProperty(i,Symbol.toStringTag,{value:"Module"})});
//# sourceMappingURL=OCSDK.umd.cjs.map
